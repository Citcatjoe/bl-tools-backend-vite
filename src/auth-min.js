import{signInWithEmailAndPassword,onAuthStateChanged,signOut}from"firebase/auth";import{auth}from"./firebase-sdk";import{showAddBtn,hideAddBtn,showLoginBox,hideLoginBox,showHeader,hideHeader,getElems,clearElems}from"./app";const emailInput=document.getElementById("email"),passwordInput=document.getElementById("password"),loginButton=document.getElementById("login-button"),userInfoElement=document.getElementById("user-info");loginButton.addEventListener("click",(()=>{const e=emailInput.value,n=passwordInput.value;signInWithEmailAndPassword(auth,e,n).then((e=>{console.log("Utilisateur connecté:",e.user),userInfoElement.innerText=`Connecté en tant que : ${e.user.email}`})).catch((e=>{console.error("Erreur de connexion:",e.message),userInfoElement.innerText="Email ou mot de passe incorrect.",alert("Email ou mot de passe incorrect. Veuillez vérifier vos informations.")}))}));const uiConfig={signInOptions:["password","google.com"],signInSuccessUrl:"/",callbacks:{signInSuccessWithAuthResult:e=>(console.log("Utilisateur connecté:",e.user),!0)}};document.getElementById("logout").addEventListener("click",(()=>{signOut(auth).then((()=>console.log("Utilisateur déconnecté"))).catch((e=>console.error("Erreur de déconnexion",e)))})),onAuthStateChanged(auth,(e=>{e?(console.log("Utilisateur connecté :",e),userInfoElement.innerText=`Connecté en tant que : ${e.email}`,showHeader(),hideLoginBox(),showAddBtn(),getElems()):(console.log("Aucun utilisateur connecté"),userInfoElement.innerText="Aucun utilisateur connecté",hideHeader(),showLoginBox(),hideAddBtn(),clearElems())}));